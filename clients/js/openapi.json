{
  "openapi": "3.1.0",
  "info": {
    "title": "chroma-frontend",
    "description": "",
    "license": {
      "name": ""
    },
    "version": "1.0.0"
  },
  "paths": {
    "/api/v2/auth/identity": {
      "get": {
        "tags": [],
        "summary": "Retrieves the current user's identity, tenant, and databases.",
        "operationId": "get_user_identity",
        "responses": {
          "200": {
            "description": "Get user identity",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserIdentityResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/healthcheck": {
      "get": {
        "tags": [],
        "summary": "Health check endpoint that returns 200 if the server and executor are ready",
        "operationId": "healthcheck",
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/heartbeat": {
      "get": {
        "tags": [],
        "summary": "Heartbeat endpoint that returns a nanosecond timestamp of the current time.",
        "operationId": "heartbeat",
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HeartbeatResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/pre-flight-checks": {
      "get": {
        "tags": [],
        "summary": "Pre-flight checks endpoint reporting basic readiness info.",
        "operationId": "pre_flight_checks",
        "responses": {
          "200": {
            "description": "Pre flight checks",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChecklistResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/reset": {
      "post": {
        "tags": [],
        "summary": "Reset endpoint allowing authorized users to reset the database.",
        "operationId": "reset",
        "responses": {
          "200": {
            "description": "Reset successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "boolean"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants": {
      "post": {
        "tags": [],
        "summary": "Creates a new tenant.",
        "operationId": "create_tenant",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTenantPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Tenant created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateTenantResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}": {
      "get": {
        "tags": [],
        "summary": "Returns an existing tenant by ID.",
        "operationId": "get_tenant",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "ID of the tenant to retrieve",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tenant found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTenantResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Tenant not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [],
        "summary": "Updates an existing tenant by ID.",
        "operationId": "update_tenant",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "ID of the tenant to update",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateTenantPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Tenant updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateTenantResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Tenant not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases": {
      "get": {
        "tags": [],
        "summary": "Lists all databases for a given tenant.",
        "operationId": "list_databases",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID to list databases for",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Limit for pagination",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Offset for pagination",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of databases",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Vec"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [],
        "summary": "Creates a new database for a given tenant.",
        "operationId": "create_database",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID to associate with the new database",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDatabasePayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Database created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateDatabaseResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases/{database}": {
      "get": {
        "tags": [],
        "summary": "Retrieves a specific database by name.",
        "operationId": "get_database",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Name of the database to retrieve",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Database"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [],
        "summary": "Deletes a specific database.",
        "operationId": "delete_database",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Name of the database to delete",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteDatabaseResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases/{database}/collections": {
      "get": {
        "tags": [],
        "summary": "Lists all collections in the specified database.",
        "operationId": "list_collections",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Database name to list collections from",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Limit for pagination",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Offset for pagination",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of collections",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Vec"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [],
        "summary": "Creates a new collection under the specified database.",
        "operationId": "create_collection",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Database name containing the new collection",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateCollectionPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Collection created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Collection"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases/{database}/collections/{collection_id}": {
      "get": {
        "tags": [],
        "summary": "Retrieves a collection by ID or name.",
        "operationId": "get_collection",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Database name",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "collection_id",
            "in": "path",
            "description": "UUID of the collection",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Collection found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Collection"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Collection not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [],
        "summary": "Updates an existing collection's name or metadata.",
        "operationId": "update_collection",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Database name",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "collection_id",
            "in": "path",
            "description": "UUID of the collection to update",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCollectionPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Collection updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateCollectionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Collection not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [],
        "summary": "Deletes a collection in a given database.",
        "operationId": "delete_collection",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Database name",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "collection_id",
            "in": "path",
            "description": "UUID of the collection to delete",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Collection deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateCollectionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Collection not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases/{database}/collections/{collection_id}/add": {
      "post": {
        "tags": [],
        "summary": "Adds records to a collection.",
        "operationId": "collection_add",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "collection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddCollectionRecordsPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Collection added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AddCollectionRecordsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid data for collection addition"
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases/{database}/collections/{collection_id}/count": {
      "get": {
        "tags": [],
        "summary": "Retrieves the number of records in a collection.",
        "operationId": "collection_count",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID for the collection",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Database containing this collection",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "collection_id",
            "in": "path",
            "description": "Collection ID whose records are counted",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Number of records in the collection",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/u32"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Collection not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases/{database}/collections/{collection_id}/delete": {
      "post": {
        "tags": [],
        "summary": "Deletes records in a collection. Can filter by IDs or metadata.",
        "operationId": "collection_delete",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Database name",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "collection_id",
            "in": "path",
            "description": "Collection ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeleteCollectionRecordsPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Records deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DeleteCollectionRecordsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Collection not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases/{database}/collections/{collection_id}/fork": {
      "post": {
        "tags": [],
        "summary": "Forks an existing collection.",
        "operationId": "fork_collection",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Database name",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "collection_id",
            "in": "path",
            "description": "UUID of the collection to update",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForkCollectionPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Collection forked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Collection"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Collection not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases/{database}/collections/{collection_id}/get": {
      "post": {
        "tags": [],
        "summary": "Retrieves records from a collection by ID or metadata filter.",
        "operationId": "collection_get",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Database name for the collection",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "collection_id",
            "in": "path",
            "description": "Collection ID to fetch records from",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GetRequestPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Records retrieved from the collection",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Collection not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases/{database}/collections/{collection_id}/query": {
      "post": {
        "tags": [],
        "summary": "Query a collection in a variety of ways, including vector search, metadata filtering, and full-text search",
        "operationId": "collection_query",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Database name containing the collection",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "collection_id",
            "in": "path",
            "description": "Collection ID to query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Limit for pagination",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Offset for pagination",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QueryRequestPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Records matching the query",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueryResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Collection not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases/{database}/collections/{collection_id}/update": {
      "post": {
        "tags": [],
        "summary": "Updates records in a collection by ID.",
        "operationId": "collection_update",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "collection_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateCollectionRecordsPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Collection updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateCollectionRecordsResponse"
                }
              }
            }
          },
          "404": {
            "description": "Collection not found"
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases/{database}/collections/{collection_id}/upsert": {
      "post": {
        "tags": [],
        "summary": "Upserts records in a collection (create if not exists, otherwise update).",
        "operationId": "collection_upsert",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Database name",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "collection_id",
            "in": "path",
            "description": "Collection ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpsertCollectionRecordsPayload"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Records upserted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpsertCollectionRecordsResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Collection not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/tenants/{tenant}/databases/{database}/collections_count": {
      "get": {
        "tags": [],
        "summary": "Retrieves the total number of collections in a given database.",
        "operationId": "count_collections",
        "parameters": [
          {
            "name": "tenant",
            "in": "path",
            "description": "Tenant ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "database",
            "in": "path",
            "description": "Database name to count collections from",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Count of collections",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/u32"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v2/version": {
      "get": {
        "tags": [],
        "summary": "Returns the version of the server.",
        "operationId": "version",
        "responses": {
          "200": {
            "description": "Get server version",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AddCollectionRecordsPayload": {
        "type": "object",
        "required": ["ids"],
        "properties": {
          "documents": {
            "type": ["array", "null"],
            "items": {
              "type": ["string", "null"]
            }
          },
          "embeddings": {
            "type": ["array", "null"],
            "items": {
              "type": "array",
              "items": {
                "type": "number",
                "format": "float"
              }
            }
          },
          "ids": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadatas": {
            "type": ["array", "null"],
            "items": {
              "$ref": "#/components/schemas/HashMap",
              "nullable": true
            }
          },
          "uris": {
            "type": ["array", "null"],
            "items": {
              "type": ["string", "null"]
            }
          }
        }
      },
      "AddCollectionRecordsResponse": {
        "type": "object"
      },
      "ChecklistResponse": {
        "type": "object",
        "required": ["max_batch_size"],
        "properties": {
          "max_batch_size": {
            "type": "integer",
            "format": "int32",
            "minimum": 0
          }
        }
      },
      "Collection": {
        "type": "object",
        "required": [
          "id",
          "name",
          "configuration_json",
          "tenant",
          "database",
          "log_position",
          "version"
        ],
        "properties": {
          "configuration_json": {
            "$ref": "#/components/schemas/CollectionConfiguration"
          },
          "database": {
            "type": "string"
          },
          "dimension": {
            "type": ["integer", "null"],
            "format": "int32"
          },
          "id": {
            "$ref": "#/components/schemas/CollectionUuid"
          },
          "log_position": {
            "type": "integer",
            "format": "int64"
          },
          "metadata": {
            "$ref": "#/components/schemas/HashMap",
            "nullable": true
          },
          "name": {
            "type": "string"
          },
          "tenant": {
            "type": "string"
          },
          "version": {
            "type": "integer",
            "format": "int32"
          }
        }
      },
      "CollectionConfiguration": {
        "type": "object",
        "properties": {
          "embedding_function": {
            "$ref": "#/components/schemas/EmbeddingFunctionConfiguration",
            "nullable": true
          },
          "hnsw": {
            "$ref": "#/components/schemas/HnswConfiguration",
            "nullable": true
          },
          "spann": {
            "$ref": "#/components/schemas/SpannConfiguration",
            "nullable": true
          }
        }
      },
      "CollectionUuid": {
        "type": "string",
        "format": "uuid",
        "description": "CollectionUuid is a wrapper around Uuid to provide a type for the collection id."
      },
      "CreateCollectionPayload": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "configuration": {
            "$ref": "#/components/schemas/CollectionConfiguration",
            "nullable": true
          },
          "get_or_create": {
            "type": "boolean"
          },
          "metadata": {
            "$ref": "#/components/schemas/HashMap",
            "nullable": true
          },
          "name": {
            "type": "string"
          }
        }
      },
      "CreateDatabasePayload": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string"
          }
        }
      },
      "CreateDatabaseResponse": {
        "type": "object"
      },
      "CreateTenantPayload": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string"
          }
        }
      },
      "CreateTenantResponse": {
        "type": "object"
      },
      "Database": {
        "type": "object",
        "required": ["id", "name", "tenant"],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string"
          },
          "tenant": {
            "type": "string"
          }
        }
      },
      "DeleteCollectionRecordsPayload": {
        "allOf": [
          {
            "$ref": "#/components/schemas/RawWhereFields"
          },
          {
            "type": "object",
            "properties": {
              "ids": {
                "type": ["array", "null"],
                "items": {
                  "type": "string"
                }
              }
            }
          }
        ]
      },
      "DeleteCollectionRecordsResponse": {
        "type": "object"
      },
      "DeleteDatabaseResponse": {
        "type": "object"
      },
      "EmbeddingFunctionConfiguration": {
        "oneOf": [
          {
            "type": "object",
            "required": ["type"],
            "properties": {
              "type": {
                "type": "string",
                "enum": ["legacy"]
              }
            }
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/EmbeddingFunctionNewConfiguration"
              },
              {
                "type": "object",
                "required": ["type"],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["known"]
                  }
                }
              }
            ]
          }
        ]
      },
      "EmbeddingFunctionNewConfiguration": {
        "type": "object",
        "required": ["name", "config"],
        "properties": {
          "config": {},
          "name": {
            "type": "string"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "required": ["error", "message"],
        "properties": {
          "error": {
            "type": "string"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "ForkCollectionPayload": {
        "type": "object",
        "required": ["new_name"],
        "properties": {
          "new_name": {
            "type": "string"
          }
        }
      },
      "GetRequestPayload": {
        "allOf": [
          {
            "$ref": "#/components/schemas/RawWhereFields"
          },
          {
            "type": "object",
            "properties": {
              "ids": {
                "type": ["array", "null"],
                "items": {
                  "type": "string"
                }
              },
              "include": {
                "$ref": "#/components/schemas/IncludeList"
              },
              "limit": {
                "type": ["integer", "null"],
                "format": "int32",
                "minimum": 0
              },
              "offset": {
                "type": ["integer", "null"],
                "format": "int32",
                "minimum": 0
              }
            }
          }
        ]
      },
      "GetResponse": {
        "type": "object",
        "required": ["ids", "include"],
        "properties": {
          "documents": {
            "type": ["array", "null"],
            "items": {
              "type": ["string", "null"]
            }
          },
          "embeddings": {
            "type": ["array", "null"],
            "items": {
              "type": "array",
              "items": {
                "type": "number",
                "format": "float"
              }
            }
          },
          "ids": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "include": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Include"
            }
          },
          "metadatas": {
            "type": ["array", "null"],
            "items": {
              "$ref": "#/components/schemas/HashMap",
              "nullable": true
            }
          },
          "uris": {
            "type": ["array", "null"],
            "items": {
              "type": ["string", "null"]
            }
          }
        }
      },
      "GetTenantResponse": {
        "type": "object",
        "required": ["name"],
        "properties": {
          "name": {
            "type": "string"
          },
          "resource_name": {
            "type": ["string", "null"]
          }
        }
      },
      "GetUserIdentityResponse": {
        "type": "object",
        "required": ["user_id", "tenant", "databases"],
        "properties": {
          "databases": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "tenant": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          }
        }
      },
      "HashMap": {
        "type": "object",
        "additionalProperties": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "integer",
              "format": "int64"
            },
            {
              "type": "number",
              "format": "double"
            },
            {
              "type": "string"
            }
          ]
        },
        "propertyNames": {
          "type": "string"
        }
      },
      "HeartbeatResponse": {
        "type": "object",
        "required": ["nanosecond heartbeat"],
        "properties": {
          "nanosecond heartbeat": {
            "type": "integer",
            "minimum": 0
          }
        }
      },
      "HnswConfiguration": {
        "type": "object",
        "properties": {
          "ef_construction": {
            "type": ["integer", "null"],
            "minimum": 0
          },
          "ef_search": {
            "type": ["integer", "null"],
            "minimum": 0
          },
          "max_neighbors": {
            "type": ["integer", "null"],
            "minimum": 0
          },
          "resize_factor": {
            "type": ["number", "null"],
            "format": "double"
          },
          "space": {
            "$ref": "#/components/schemas/HnswSpace"
          },
          "sync_threshold": {
            "type": ["integer", "null"],
            "minimum": 0
          }
        },
        "additionalProperties": false
      },
      "HnswSpace": {
        "type": "string",
        "enum": ["l2", "cosine", "ip"]
      },
      "Include": {
        "type": "string",
        "enum": ["distances", "documents", "embeddings", "metadatas", "uris"]
      },
      "IncludeList": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/Include"
        }
      },
      "QueryRequestPayload": {
        "allOf": [
          {
            "$ref": "#/components/schemas/RawWhereFields"
          },
          {
            "type": "object",
            "required": ["query_embeddings"],
            "properties": {
              "ids": {
                "type": ["array", "null"],
                "items": {
                  "type": "string"
                }
              },
              "include": {
                "$ref": "#/components/schemas/IncludeList"
              },
              "n_results": {
                "type": ["integer", "null"],
                "format": "int32",
                "minimum": 0
              },
              "query_embeddings": {
                "type": "array",
                "items": {
                  "type": "array",
                  "items": {
                    "type": "number",
                    "format": "float"
                  }
                }
              }
            }
          }
        ]
      },
      "QueryResponse": {
        "type": "object",
        "required": ["ids", "include"],
        "properties": {
          "distances": {
            "type": ["array", "null"],
            "items": {
              "type": "array",
              "items": {
                "type": ["number", "null"],
                "format": "float"
              }
            }
          },
          "documents": {
            "type": ["array", "null"],
            "items": {
              "type": "array",
              "items": {
                "type": ["string", "null"]
              }
            }
          },
          "embeddings": {
            "type": ["array", "null"],
            "items": {
              "type": "array",
              "items": {
                "type": ["array", "null"],
                "items": {
                  "type": "number",
                  "format": "float"
                }
              }
            }
          },
          "ids": {
            "type": "array",
            "items": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "include": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Include"
            }
          },
          "metadatas": {
            "type": ["array", "null"],
            "items": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/HashMap",
                "nullable": true
              }
            }
          },
          "uris": {
            "type": ["array", "null"],
            "items": {
              "type": "array",
              "items": {
                "type": ["string", "null"]
              }
            }
          }
        }
      },
      "RawWhereFields": {
        "type": "object",
        "properties": {
          "where": {},
          "where_document": {}
        }
      },
      "SpannConfiguration": {
        "type": "object",
        "properties": {
          "ef_construction": {
            "type": ["integer", "null"],
            "minimum": 0
          },
          "ef_search": {
            "type": ["integer", "null"],
            "minimum": 0
          },
          "max_neighbors": {
            "type": ["integer", "null"],
            "minimum": 0
          },
          "merge_threshold": {
            "type": ["integer", "null"],
            "format": "int32",
            "minimum": 0
          },
          "reassign_neighbor_count": {
            "type": ["integer", "null"],
            "format": "int32",
            "minimum": 0
          },
          "search_nprobe": {
            "type": ["integer", "null"],
            "format": "int32",
            "minimum": 0
          },
          "space": {
            "$ref": "#/components/schemas/HnswSpace"
          },
          "split_threshold": {
            "type": ["integer", "null"],
            "format": "int32",
            "minimum": 0
          },
          "write_nprobe": {
            "type": ["integer", "null"],
            "format": "int32",
            "minimum": 0
          }
        },
        "additionalProperties": false
      },
      "UpdateCollectionConfiguration": {
        "type": "object",
        "properties": {
          "embedding_function": {
            "$ref": "#/components/schemas/EmbeddingFunctionConfiguration",
            "nullable": true
          },
          "hnsw": {
            "$ref": "#/components/schemas/UpdateHnswConfiguration",
            "nullable": true
          },
          "spann": {
            "$ref": "#/components/schemas/SpannConfiguration",
            "nullable": true
          }
        }
      },
      "UpdateCollectionPayload": {
        "type": "object",
        "properties": {
          "new_configuration": {
            "$ref": "#/components/schemas/UpdateCollectionConfiguration",
            "nullable": true
          },
          "new_metadata": {
            "$ref": "#/components/schemas/HashMap",
            "nullable": true
          },
          "new_name": {
            "type": ["string", "null"]
          }
        }
      },
      "UpdateCollectionRecordsPayload": {
        "type": "object",
        "required": ["ids"],
        "properties": {
          "documents": {
            "type": ["array", "null"],
            "items": {
              "type": ["string", "null"]
            }
          },
          "embeddings": {
            "type": ["array", "null"],
            "items": {
              "type": ["array", "null"],
              "items": {
                "type": "number",
                "format": "float"
              }
            }
          },
          "ids": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadatas": {
            "type": ["array", "null"],
            "items": {
              "$ref": "#/components/schemas/HashMap",
              "nullable": true
            }
          },
          "uris": {
            "type": ["array", "null"],
            "items": {
              "type": ["string", "null"]
            }
          }
        }
      },
      "UpdateCollectionRecordsResponse": {
        "type": "object"
      },
      "UpdateCollectionResponse": {
        "type": "object"
      },
      "UpdateHnswConfiguration": {
        "type": "object",
        "properties": {
          "batch_size": {
            "type": ["integer", "null"],
            "minimum": 0
          },
          "ef_search": {
            "type": ["integer", "null"],
            "minimum": 0
          },
          "max_neighbors": {
            "type": ["integer", "null"],
            "minimum": 0
          },
          "num_threads": {
            "type": ["integer", "null"],
            "minimum": 0
          },
          "resize_factor": {
            "type": ["number", "null"],
            "format": "double"
          },
          "sync_threshold": {
            "type": ["integer", "null"],
            "minimum": 0
          }
        },
        "additionalProperties": false
      },
      "UpdateTenantPayload": {
        "type": "object",
        "required": ["resource_name"],
        "properties": {
          "resource_name": {
            "type": "string"
          }
        }
      },
      "UpdateTenantResponse": {
        "type": "object"
      },
      "UpsertCollectionRecordsPayload": {
        "type": "object",
        "required": ["ids"],
        "properties": {
          "documents": {
            "type": ["array", "null"],
            "items": {
              "type": ["string", "null"]
            }
          },
          "embeddings": {
            "type": ["array", "null"],
            "items": {
              "type": "array",
              "items": {
                "type": "number",
                "format": "float"
              }
            }
          },
          "ids": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "metadatas": {
            "type": ["array", "null"],
            "items": {
              "$ref": "#/components/schemas/HashMap",
              "nullable": true
            }
          },
          "uris": {
            "type": ["array", "null"],
            "items": {
              "type": ["string", "null"]
            }
          }
        }
      },
      "UpsertCollectionRecordsResponse": {
        "type": "object"
      },
      "Vec": {
        "type": "array",
        "items": {
          "type": "object",
          "required": [
            "id",
            "name",
            "configuration_json",
            "tenant",
            "database",
            "log_position",
            "version"
          ],
          "properties": {
            "configuration_json": {
              "$ref": "#/components/schemas/CollectionConfiguration"
            },
            "database": {
              "type": "string"
            },
            "dimension": {
              "type": ["integer", "null"],
              "format": "int32"
            },
            "id": {
              "$ref": "#/components/schemas/CollectionUuid"
            },
            "log_position": {
              "type": "integer",
              "format": "int64"
            },
            "metadata": {
              "$ref": "#/components/schemas/HashMap",
              "nullable": true
            },
            "name": {
              "type": "string"
            },
            "tenant": {
              "type": "string"
            },
            "version": {
              "type": "integer",
              "format": "int32"
            }
          }
        }
      },
      "u32": {
        "type": "integer",
        "format": "int32",
        "minimum": 0
      }
    },
    "securitySchemes": {
      "x-chroma-token": {
        "type": "apiKey",
        "in": "header",
        "name": "x-chroma-token"
      }
    }
  }
}
